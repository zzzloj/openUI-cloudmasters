<?xml version="1.0" encoding="utf-8"?>
<hookexport>
  <hookdata>
    <config>
      <hook_name>(RC34) Ban Members from Testimonials System (Comments)</hook_name>
      <hook_desc>Allow ban members from Testimonials System (Comments)</hook_desc>
      <hook_author>-RAW-</hook_author>
      <hook_email>raw@rawcodes.net</hook_email>
      <hook_website>http://invisionlegacy.com</hook_website>
      <hook_update_check/>
      <hook_requirements><![CDATA[a:3:{s:21:"required_applications";a:0:{}s:20:"hook_php_version_min";s:1:"0";s:20:"hook_php_version_max";s:1:"0";}]]></hook_requirements>
      <hook_version_human>1.1.0</hook_version_human>
      <hook_version_long>11000</hook_version_long>
      <hook_extra_data><![CDATA[a:3:{s:7:"display";a:1:{s:9:"templates";s:38:"From skin_testimonials: banFromComment";}s:9:"templates";a:1:{s:17:"skin_testimonials";a:1:{i:0;s:14:"banFromComment";}}s:8:"database";a:0:{}}]]></hook_extra_data>
      <hook_key>test_banmember_comments</hook_key>
      <hook_global_caches/>
    </config>
  </hookdata>
  <hookfiles>
    <file>
      <hook_file_real>testimonialsBanButtonComm.php</hook_file_real>
      <hook_type>templateHooks</hook_type>
      <hook_classname>testimonialsBanButtonComm</hook_classname>
      <hook_data><![CDATA[a:8:{s:12:"dataLocation";s:0:"";s:14:"libApplication";s:0:"";s:15:"classToOverload";s:0:"";s:9:"skinGroup";s:17:"skin_testimonials";s:12:"skinFunction";s:14:"testemunhoView";s:4:"type";s:2:"if";s:2:"id";s:16:"canReportComment";s:8:"position";s:10:"post.endif";}]]></hook_data>
      <hooks_source><![CDATA[<?php

class testimonialsBanButtonComm
{
	public $registry;
	public $memberData;
	public $settings;
	public $lang;
	
	public function __construct()
	{
		$this->registry   = ipsRegistry::instance();
		$this->memberData =& $this->registry->member()->fetchMemberData();
		$this->settings   =& $this->registry->fetchSettings();
		$this->lang       =  $this->registry->getClass('class_localization');
	}
	
	public function getOutput()
	{
		$this->registry->class_localization->loadLanguageFile( array( 'public_testemunhos' ), 'testimonials' );
		return $this->registry->getClass('output')->getTemplate('testimonials')->banFromComment();
	}
}]]></hooks_source>
    </file>
  </hookfiles>
  <hookextras_settings/>
  <hookextras_language/>
  <hookextras_modules/>
  <hookextras_help/>
  <hookextras_templates>
    <templates>
      <template_group>skin_testimonials</template_group>
      <template_content><![CDATA[<if test="$this->memberData['sostestemunhos_banir_membros']">
	<li class='report'>
		<a href='{parse url="module=testemunhos&amp;section=moderate&amp;do=ban&amp;ID={$this->request['showtestimonial']}&amp;auth_key={$this->member->form_hash}" base="publicWithApp"}' title='{$this->lang->words['banir_desc']}'> {$this->lang->words['banir']}</a>
	</li>
</if>]]></template_content>
      <template_name>banFromComment</template_name>
      <template_data/>
      <template_updated>1351715142</template_updated>
      <template_removable>0</template_removable>
      <template_added_to>0</template_added_to>
      <template_user_added>1</template_user_added>
      <template_user_edited>0</template_user_edited>
      <template_master_key>root</template_master_key>
    </templates>
  </hookextras_templates>
  <hookextras_css/>
  <hookextras_replacements/>
  <hookextras_tasks/>
  <hookextras_database_create/>
  <hookextras_database_alter/>
  <hookextras_database_update/>
  <hookextras_database_insert/>
</hookexport>
