<?xml version="1.0" encoding="utf-8"?>
<hookexport>
  <hookdata>
    <config>
      <hook_name>(RC34) Pending Testimonials</hook_name>
      <hook_desc>Show pending testimonials</hook_desc>
      <hook_author>-RAW-</hook_author>
      <hook_email>raw@rawcodes.net</hook_email>
      <hook_website>http://rawcodes.net</hook_website>
      <hook_update_check/>
      <hook_requirements><![CDATA[a:3:{s:21:"required_applications";a:0:{}s:20:"hook_php_version_min";s:0:"";s:20:"hook_php_version_max";s:0:"";}]]></hook_requirements>
      <hook_version_human>1.1.0</hook_version_human>
      <hook_version_long>11000</hook_version_long>
      <hook_extra_data><![CDATA[a:3:{s:7:"display";a:1:{s:9:"templates";s:46:"From skin_global: hooksos_testemunhospendentes";}s:9:"templates";a:1:{s:11:"skin_global";a:1:{i:0;s:28:"hooksos_testemunhospendentes";}}s:8:"database";a:0:{}}]]></hook_extra_data>
      <hook_key>sos_testemunhos</hook_key>
      <hook_global_caches/>
    </config>
  </hookdata>
  <hookfiles>
    <file>
      <hook_file_real>testimonialsPending.php</hook_file_real>
      <hook_type>templateHooks</hook_type>
      <hook_classname>testimonialsPending</hook_classname>
      <hook_data><![CDATA[a:8:{s:12:"dataLocation";s:0:"";s:14:"libApplication";s:0:"";s:15:"classToOverload";s:0:"";s:9:"skinGroup";s:11:"skin_global";s:12:"skinFunction";s:14:"globalTemplate";s:4:"type";s:2:"if";s:2:"id";s:11:"showacplink";s:8:"position";s:10:"post.endif";}]]></hook_data>
      <hooks_source><![CDATA[<?php

class testimonialsPending
{
	public $registry;
	
	public function __construct()
	{
		$this->registry   = ipsRegistry::instance();
		$this->settings   =& $this->registry->fetchSettings();
		$this->memberData =& $this->registry->member()->fetchMemberData();
		$this->DB         = ipsRegistry::DB();
		$this->member     = $this->registry->member();
		$this->lang		  = $this->registry->getClass('class_localization');
		$this->cache	  =	 $this->registry->cache();
		$this->caches	  =& $this->cache->fetchCaches();
	}
	
	public function getOutput()
	{
		if ( $this->memberData['g_is_supmod'] AND $this->memberData['sostestemunhos_aprovar'] )
		{
			$this->caches[ 'testemunhos' ] = $this->cache->getCache( 'testemunhos' );
			$cnt = $this->caches[ 'testemunhos' ][ 'unapproved' ];
			
			$this->lang->words['testemunhos_desaprovados'] = sprintf( $this->lang->words['testemunhos_desaprovados'], $cnt );
	
			return $this->registry->output->getTemplate( 'global' )->hooksos_testemunhospendentes( $cnt );
		}
	}	
}]]></hooks_source>
    </file>
  </hookfiles>
  <hookextras_settings/>
  <hookextras_language>
    <language>
      <word_id>9200</word_id>
      <lang_id>1</lang_id>
      <word_app>core</word_app>
      <word_pack>public_global</word_pack>
      <word_key>testemunhos_desaprovados</word_key>
      <word_default>Testimonials: There are %s pending testimonials</word_default>
      <word_custom/>
      <word_default_version>1</word_default_version>
      <word_custom_version/>
      <word_js>0</word_js>
    </language>
    <language>
      <word_id>9200</word_id>
      <lang_id>1</lang_id>
      <word_app>core</word_app>
      <word_pack>public_global</word_pack>
      <word_key>testemunho_desaprovado_hook</word_key>
      <word_default>Testimonials: There is 1 pending testimonial</word_default>
      <word_custom/>
      <word_default_version>1</word_default_version>
      <word_custom_version/>
      <word_js>0</word_js>
    </language>
  </hookextras_language>
  <hookextras_modules/>
  <hookextras_help/>
  <hookextras_templates>
    <templates>
      <template_group>skin_global</template_group>
      <template_content><![CDATA[<if test="$cnt > 0">
<ul class='right'>
	<if test="$cnt == 1">
		<li class="active"><a href='{parse url="app=testimonials&module=testemunhos&section=pending" base="public"}' title='{$this->lang->words['testemunho_desaprovado_hook']}'>&nbsp;{$this->lang->words['testemunho_desaprovado_hook']}</a>&nbsp;&nbsp;&nbsp;</li>
	<else />
		<li class="active"><a href='{parse url="app=testimonials&module=testemunhos&section=pending" base="public"}' title='{$this->lang->words['testemunhos_desaprovados']}'>&nbsp;{$this->lang->words['testemunhos_desaprovados']}</a>&nbsp;&nbsp;&nbsp;</li>
	</if>
</ul>
</if>]]></template_content>
      <template_name>hooksos_testemunhospendentes</template_name>
      <template_data>$cnt=0</template_data>
      <template_updated>1351709073</template_updated>
      <template_removable>0</template_removable>
      <template_added_to>0</template_added_to>
      <template_user_added>1</template_user_added>
      <template_user_edited>0</template_user_edited>
      <template_master_key>root</template_master_key>
    </templates>
  </hookextras_templates>
  <hookextras_css/>
  <hookextras_replacements/>
  <hookextras_tasks/>
  <hookextras_database_create/>
  <hookextras_database_alter/>
  <hookextras_database_update/>
  <hookextras_database_insert/>
</hookexport>
